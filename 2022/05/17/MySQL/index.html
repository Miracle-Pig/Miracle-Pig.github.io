<!DOCTYPE html>
<html lang=en>
<head>
  <meta charset="utf-8">
  
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no, minimal-ui">
  <meta name="renderer" content="webkit">
  <meta http-equiv="Cache-Control" content="no-transform" />
  <meta http-equiv="Cache-Control" content="no-siteapp" />
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <meta name="format-detection" content="telephone=no,email=no,adress=no">
  <!-- Color theme for statusbar -->
  <meta name="theme-color" content="#000000" />
  <!-- 强制页面在当前窗口以独立页面显示,防止别人在框架里调用页面 -->
  <meta http-equiv="window-target" content="_top" />
  
  
  <title>MySQL | Hexo</title>
  <meta name="description" content="MySQL知识点&amp;面试题总结MySQL 基础 关系型数据库介绍  一种建立在关系模型的基础上的数据库 关系模型表明了数据库中所存储的数据之间的联系（一对一、一对多、多对多） 数据都被存放在了各种表中，表中的每一行就存放着一条数据（比如一个用户的信息） 大部分关系型数据库都使用 SQL 来操作数据库中的数据 大部分关系型数据库都支持**事务的四大特性(ACID)**。   常见的关系型数据库">
<meta property="og:type" content="article">
<meta property="og:title" content="MySQL">
<meta property="og:url" content="http://example.com/2022/05/17/MySQL/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="MySQL知识点&amp;面试题总结MySQL 基础 关系型数据库介绍  一种建立在关系模型的基础上的数据库 关系模型表明了数据库中所存储的数据之间的联系（一对一、一对多、多对多） 数据都被存放在了各种表中，表中的每一行就存放着一条数据（比如一个用户的信息） 大部分关系型数据库都使用 SQL 来操作数据库中的数据 大部分关系型数据库都支持**事务的四大特性(ACID)**。   常见的关系型数据库">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20210513092328171.png">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20210513092224836.png">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20210420165326946.png">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20210420165311654.png">
<meta property="article:published_time" content="2022-05-17T05:35:42.997Z">
<meta property="article:modified_time" content="2022-05-17T05:37:00.840Z">
<meta property="article:author" content="John Doe">
<meta property="article:tag" content="SQL">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://img-blog.csdnimg.cn/20210513092328171.png">
  <!-- Canonical links -->
  <link rel="canonical" href="http://example.com/2022/05/17/MySQL/index.html">
  
    <link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png" type="image/x-icon">
  
  
<link rel="stylesheet" href="/css/style.css">

  
  
  
  
<meta name="generator" content="Hexo 6.2.0"></head>


<body class="main-center" itemscope itemtype="http://schema.org/WebPage">
  <header class="header" itemscope itemtype="http://schema.org/WPHeader">
  <div class="slimContent">
    <div class="navbar-header">
      
      
      <div class="profile-block text-center">
        <a id="avatar" href="https://github.com/Miracle-Pig" target="_blank">
          <img class="img-circle img-rotate" src="/images/avatar.jpg" width="200" height="200">
        </a>
        <h2 id="name" class="hidden-xs hidden-sm">Miracle-Pig</h2>
        <h3 id="title" class="hidden-xs hidden-sm hidden-md">Web Developer &amp; Designer</h3>
        <small id="location" class="text-muted hidden-xs hidden-sm"><i class="icon icon-map-marker"></i> Guangzhou, China</small>
      </div>
      
      <div class="search" id="search-form-wrap">

    <form class="search-form sidebar-form">
        <div class="input-group">
            <input type="text" class="search-form-input form-control" placeholder="Search" />
            <span class="input-group-btn">
                <button type="submit" class="search-form-submit btn btn-flat" onclick="return false;"><i class="icon icon-search"></i></button>
            </span>
        </div>
    </form>
    <div class="ins-search">
  <div class="ins-search-mask"></div>
  <div class="ins-search-container">
    <div class="ins-input-wrapper">
      <input type="text" class="ins-search-input" placeholder="Type something..." x-webkit-speech />
      <button type="button" class="close ins-close ins-selectable" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">×</span></button>
    </div>
    <div class="ins-section-wrapper">
      <div class="ins-section-container"></div>
    </div>
  </div>
</div>


</div>
      <button class="navbar-toggle collapsed" type="button" data-toggle="collapse" data-target="#main-navbar" aria-controls="main-navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
    </div>
    <nav id="main-navbar" class="collapse navbar-collapse" itemscope itemtype="http://schema.org/SiteNavigationElement" role="navigation">
      <ul class="nav navbar-nav main-nav ">
        
        
        <li class="menu-item menu-item-home">
          <a href="/.">
            
            <i class="icon icon-home-fill"></i>
            
            <span class="menu-title">Home</span>
          </a>
        </li>
        
        
        <li class="menu-item menu-item-archives">
          <a href="/archives">
            
            <i class="icon icon-archives-fill"></i>
            
            <span class="menu-title">Archives</span>
          </a>
        </li>
        
        
        <li class="menu-item menu-item-categories">
          <a href="/categories">
            
            <i class="icon icon-folder"></i>
            
            <span class="menu-title">Categories</span>
          </a>
        </li>
        
        
        <li class="menu-item menu-item-tags">
          <a href="/tags">
            
            <i class="icon icon-tags"></i>
            
            <span class="menu-title">Tags</span>
          </a>
        </li>
        
        
        <li class="menu-item menu-item-repository">
          <a href="/repository">
            
            <i class="icon icon-project"></i>
            
            <span class="menu-title">Repository</span>
          </a>
        </li>
        
      </ul>
      
	
    <ul class="social-links">
    	
        <li><a href="https://github.com/Miracle-Pig" target="_blank" title="Github" data-toggle=tooltip data-placement=top><i class="icon icon-github"></i></a></li>
        
        <li><a href="/atom.xml" target="_blank" title="Rss" data-toggle=tooltip data-placement=top><i class="icon icon-rss"></i></a></li>
        
    </ul>

    </nav>
  </div>
</header>

  
    <aside class="sidebar" itemscope itemtype="http://schema.org/WPSideBar">
  <div class="slimContent">
    
      <div class="widget">
    <h3 class="widget-title">Board</h3>
    <div class="widget-body">
        <div id="board">
            <div class="content">
                <p>Miracle-Pig</p> <p>中大软工硕士</p> <p>擅长:C&C++ liunx平台后台开发</p> <p>研究邻域:并行计算</p> <p>欢迎各位大佬交流经验!!!</p>
            </div>
        </div>
    </div>
</div>

    
      
  <div class="widget">
    <h3 class="widget-title">Categories</h3>
    <div class="widget-body">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%8A%80%E5%B7%A7/">技巧</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/">数据库</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E7%A0%94%E7%A9%B6/">研究</a><span class="category-list-count">1</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/%E7%A0%94%E7%A9%B6/%E9%A1%B9%E7%9B%AE/">项目</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E7%A7%91%E7%A0%94/">科研</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/">计算机基础</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E8%AF%AD%E8%A8%80/">语言</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E9%A1%B9%E7%9B%AE/">项目</a><span class="category-list-count">1</span></li></ul>
    </div>
  </div>


    
      
  <div class="widget">
    <h3 class="widget-title">Tags</h3>
    <div class="widget-body">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Algorithm-And-Data-Structure/" rel="tag">Algorithm And Data Structure</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/C/" rel="tag">C++</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Computer-Networks/" rel="tag">Computer Networks</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Operating-System/" rel="tag">Operating System</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Project/" rel="tag">Project</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Research/" rel="tag">Research</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SQL/" rel="tag">SQL</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Skills/" rel="tag">Skills</a><span class="tag-list-count">1</span></li></ul>
    </div>
  </div>


    
      
  <div class="widget">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget-body tagcloud">
      <a href="/tags/Algorithm-And-Data-Structure/" style="font-size: 13px;">Algorithm And Data Structure</a> <a href="/tags/C/" style="font-size: 14px;">C++</a> <a href="/tags/Computer-Networks/" style="font-size: 13px;">Computer Networks</a> <a href="/tags/Operating-System/" style="font-size: 13px;">Operating System</a> <a href="/tags/Project/" style="font-size: 13px;">Project</a> <a href="/tags/Research/" style="font-size: 14px;">Research</a> <a href="/tags/SQL/" style="font-size: 13px;">SQL</a> <a href="/tags/Skills/" style="font-size: 13px;">Skills</a>
    </div>
  </div>

    
      
  <div class="widget">
    <h3 class="widget-title">Archive</h3>
    <div class="widget-body">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/05/">May 2022</a><span class="archive-list-count">9</span></li></ul>
    </div>
  </div>


    
      
  <div class="widget">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget-body">
      <ul class="recent-post-list list-unstyled no-thumbnail">
        
          <li>
            
            <div class="item-inner">
              <p class="item-category">
                <a class="category-link" href="/categories/%E7%A0%94%E7%A9%B6/">研究</a><i class="icon icon-angle-right"></i><a class="category-link" href="/categories/%E7%A0%94%E7%A9%B6/%E9%A1%B9%E7%9B%AE/">项目</a>
              </p>
              <p class="item-title">
                <a href="/2022/05/17/MPI%20Spike%20Solver/" class="title">MPI Spike Solver</a>
              </p>
              <p class="item-date">
                <time datetime="2022-05-17T06:22:51.208Z" itemprop="datePublished">2022-05-17</time>
              </p>
            </div>
          </li>
          
          <li>
            
            <div class="item-inner">
              <p class="item-category">
                <a class="category-link" href="/categories/%E7%A7%91%E7%A0%94/">科研</a>
              </p>
              <p class="item-title">
                <a href="/2022/05/17/Researsh/" class="title">研究生涯</a>
              </p>
              <p class="item-date">
                <time datetime="2022-05-17T05:42:49.336Z" itemprop="datePublished">2022-05-17</time>
              </p>
            </div>
          </li>
          
          <li>
            
            <div class="item-inner">
              <p class="item-category">
                <a class="category-link" href="/categories/%E6%8A%80%E5%B7%A7/">技巧</a>
              </p>
              <p class="item-title">
                <a href="/2022/05/17/Essential%20Skills/" class="title">Essential Skills</a>
              </p>
              <p class="item-date">
                <time datetime="2022-05-17T05:39:11.128Z" itemprop="datePublished">2022-05-17</time>
              </p>
            </div>
          </li>
          
          <li>
            
            <div class="item-inner">
              <p class="item-category">
                <a class="category-link" href="/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/">数据库</a>
              </p>
              <p class="item-title">
                <a href="/2022/05/17/MySQL/" class="title">MySQL</a>
              </p>
              <p class="item-date">
                <time datetime="2022-05-17T05:35:42.997Z" itemprop="datePublished">2022-05-17</time>
              </p>
            </div>
          </li>
          
          <li>
            
            <div class="item-inner">
              <p class="item-category">
                <a class="category-link" href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/">计算机基础</a>
              </p>
              <p class="item-title">
                <a href="/2022/05/17/Computer%20Networks/" class="title">Computer Networks</a>
              </p>
              <p class="item-date">
                <time datetime="2022-05-17T05:30:39.849Z" itemprop="datePublished">2022-05-17</time>
              </p>
            </div>
          </li>
          
      </ul>
    </div>
  </div>
  

    
  </div>
</aside>

  
  
  <aside class="sidebar sidebar-toc collapse   in  " id="collapseToc" itemscope itemtype="http://schema.org/WPSideBar">
  <div class="slimContent">
    <nav id="toc" class="article-toc">
      <h3 class="toc-title">Catalogue</h3>
      <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#MySQL%E7%9F%A5%E8%AF%86%E7%82%B9-amp-%E9%9D%A2%E8%AF%95%E9%A2%98%E6%80%BB%E7%BB%93"><span class="toc-number">1.</span> <span class="toc-text">MySQL知识点&amp;面试题总结</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#MySQL-%E5%9F%BA%E7%A1%80"><span class="toc-number">1.1.</span> <span class="toc-text">MySQL 基础</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#MySQL-%E4%BB%8B%E7%BB%8D"><span class="toc-number">1.2.</span> <span class="toc-text">MySQL 介绍</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8B%E5%8A%A1"><span class="toc-number">1.3.</span> <span class="toc-text">事务</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#MySQL%E7%B4%A2%E5%BC%95%E8%AF%A6%E8%A7%A3"><span class="toc-number">1.4.</span> <span class="toc-text">MySQL索引详解</span></a></li></ol></li></ol>
    </nav>
  </div>
</aside>

<main class="main" role="main">
  <div class="content">
  <article id="post-MySQL" class="article article-type-post" itemscope itemtype="http://schema.org/BlogPosting">
    
    <div class="article-header">
      
        
  
    <h1 class="article-title" itemprop="name">
      MySQL
    </h1>
  

      
      <div class="article-meta">
        <span class="article-date">
    <i class="icon icon-calendar-check"></i>
	<a href="/2022/05/17/MySQL/" class="article-date">
	  <time datetime="2022-05-17T05:35:42.997Z" itemprop="datePublished">2022-05-17</time>
	</a>
</span>
        
  <span class="article-category">
    <i class="icon icon-folder"></i>
    <a class="article-category-link" href="/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/">数据库</a>
  </span>

        
  <span class="article-tag">
    <i class="icon icon-tags"></i>
	<a class="article-tag-link-link" href="/tags/SQL/" rel="tag">SQL</a>
  </span>


        

        <span class="post-comment"><i class="icon icon-comment"></i> <a href="/2022/05/17/MySQL/#comments" class="article-comment-link">Comments</a></span>
        
      </div>
    </div>
    <div class="article-entry marked-body" itemprop="articleBody">
      
        <h1 id="MySQL知识点-amp-面试题总结"><a href="#MySQL知识点-amp-面试题总结" class="headerlink" title="MySQL知识点&amp;面试题总结"></a>MySQL知识点&amp;面试题总结</h1><h2 id="MySQL-基础"><a href="#MySQL-基础" class="headerlink" title="MySQL 基础"></a>MySQL 基础</h2><ul>
<li><p>关系型数据库介绍</p>
<ul>
<li>一种建立在关系模型的基础上的数据库</li>
<li>关系模型表明了数据库中所存储的数据之间的联系（一对一、一对多、多对多）</li>
<li>数据都被存放在了各种表中，表中的每一行就存放着一条数据（比如一个用户的信息）</li>
<li>大部分关系型数据库都使用 SQL 来操作数据库中的数据</li>
<li>大部分关系型数据库都支持**事务的四大特性(ACID)**。</li>
</ul>
</li>
<li><p>常见的关系型数据库</p>
<ul>
<li>MySQL、PostgreSQL、Oracle、SQL Server、SQLite</li>
</ul>
</li>
</ul>
<h2 id="MySQL-介绍"><a href="#MySQL-介绍" class="headerlink" title="MySQL 介绍"></a>MySQL 介绍</h2><ul>
<li><p>关系型数据库</p>
</li>
<li><p>持久化存储我们的系统中的一些数据</p>
</li>
<li><p>开源免费、成熟</p>
</li>
<li><p>端口：3306</p>
</li>
<li><p>存储引擎</p>
<ul>
<li>查看 MySQL 提供的所有存储引擎  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; show engines;</span><br></pre></td></tr></table></figure></li>
<li>默认的存储引擎是InnoDB，事务性存储引擎</li>
<li>只有 InnoDB 支持事务</li>
<li>MyISAM与InnoDB的区别<ul>
<li>MyISAM只有表级锁，InnoDB 支持行级锁和表级锁,默认为行级锁</li>
<li>MyISAM不提供事务支持，InnoDB 提供事务支持，具有提交(commit)和回滚(rollback)事务的能力。</li>
<li>MyISAM不支持外键，而InnoDB支持外键<ul>
<li>一般我们也是不建议在数据库层面使用外键的，应用层面可以解决。不过，这样会对数据的一致性造成威胁。具体要不要使用外键还是要根据你的项目来决定。</li>
</ul>
</li>
<li>是否支持数据库异常崩溃后的安全恢复,MyISAM 不支持，而 InnoDB 支持。<ul>
<li>使用InnoDB的数据库在异常崩溃后，数据库重新启动的时候会保证数据库恢复到崩溃前的状态。这个恢复的过程依赖于redo log。</li>
<li>MySQL InnoDB 引擎使用 redo log(重做日志) 保证<strong>事务的持久性</strong>，使用 undo log(回滚日志) 来保证<strong>事务的原子性</strong>。</li>
<li>MySQL InnoDB 引擎通过 锁机制、MVCC 等手段来保证事务的隔离性（ 默认支持的隔离级别是 REPEATABLE-READ ）。</li>
<li>保证了事务的持久性、原子性、隔离性之后，一致性才能得到保障。</li>
<li>是否支持MVCC<ul>
<li>MyISAM不支持，而InnoDB支持。MVCC可以看作是行级锁的一个升级，可以有效减少加锁操作，提高性能。</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>关于MyISAM和InnoDB的选择问题<ul>
<li>大多数时候我们使用的都是InnoDB存储引擎，在某些读密集的情况下，使用MyISAM也是合适的。不过，前提是你的项目不介意 MyISAM 不支持事务、崩溃恢复等缺点。</li>
<li>一般情况下我们选择InnoDB都是没有问题的，但是某些情况下你并不在乎可扩展能力和并发能力，也不需要事务支持，也不在乎崩溃后的安全恢复问题的话，选择MyISAM也是一个不错的选择。但是一般情况下，我们都是需要考虑到这些问题的。</li>
</ul>
</li>
<li>锁机制与 InnoDB 锁算法<ul>
<li>MyISAM 和 InnoDB 存储引擎使用的锁：<ul>
<li>MyISAM 采用表级锁(table-level locking)。</li>
<li>InnoDB 支持行级锁(row-level locking)和表级锁,默认为行级锁</li>
</ul>
</li>
<li>表级锁和行级锁对比：<ul>
<li>表级锁：MySQL中锁定粒度最大的一种锁，对当前操作的整张表加锁，实现简单，资源消耗也比较少，加锁快，<strong>不会出现死锁</strong>。其锁定粒度最大，触发锁冲突的概率最高，并发度最低，MyISAM 和 InnoDB 引擎都支持表级锁。</li>
<li>行级锁：MySQL中锁定粒度最小的一种锁，只针对当前操作的行进行加锁。行级锁能大大减少数据库操作的冲突。其加锁粒度最小，并发度高，但加锁的开销也最大，加锁慢，会出现死锁。</li>
</ul>
</li>
<li>InnoDB 存储引擎的锁的算法有三种：<ul>
<li>Record lock：记录锁，单个行记录上的锁</li>
<li>Gap lock：间隙锁，锁定一个范围，不包括记录本身</li>
<li>Next-keylock：record+gap临键锁，锁定一个范围，包含记录本身</li>
</ul>
</li>
</ul>
</li>
<li>查询缓存<ul>
<li>执行查询语句的时候，会先查询缓存。不过，MySQL 8.0 版本后移除，因为这个功能不太实用</li>
<li>开启查询缓存后在同样的查询条件以及数据情况下，会直接在缓存中返回结果</li>
<li>这里的查询条件包括查询本身、当前要查询的数据库、客户端协议版本号等一些可能影响结果的信息。</li>
<li>任何两个查询在任何字符上的不同都会导致缓存不命中</li>
<li>如果查询中包含任何用户自定义函数、存储函数、用户变量、临时表、MySQL库中的系统表，其查询结果也不会被缓存。</li>
<li>查询缓存不命中的情况<ul>
<li>缓存建立之后，MySQL的查询缓存系统会跟踪查询中涉及的每张表，如果这些表（数据或结构）发生变化，那么和这张表相关的所有缓存数据都将失效。</li>
</ul>
</li>
<li><strong>缓存虽然能够提升数据库的查询性能，但是缓存同时也带来了额外的开销，每次查询后都要做一次缓存操作，失效后还要销毁。因此，开启查询缓存要谨慎，尤其对于写密集的应用来说更是如此。</strong></li>
<li>如果开启，要注意合理控制缓存空间大小，一般来说其大小设置为几十 MB 比较合适。此外，还可以通过 sql_cache 和 sql_no_cache 来控制某个查询语句是否需要缓存：<h2 id="事务"><a href="#事务" class="headerlink" title="事务"></a>事务</h2></li>
</ul>
</li>
</ul>
</li>
<li><p>概念：事务是逻辑上的一组操作，要么都执行，要么都不执行</p>
</li>
<li><p>数据库事务</p>
<ul>
<li>数据库事务可以保证多个对数据库的操作（也就是SQL语句）构成一个逻辑上的整体。构成这个逻辑上的整体的这些数据库操作遵循：要么全部执行成功,要么全部不执行 。  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># 开启一个事务</span><br><span class="line">START TRANSACTION;</span><br><span class="line"># 多条 SQL 语句</span><br><span class="line">SQL1,SQL2...</span><br><span class="line">## 提交事务</span><br><span class="line">COMMIT;</span><br></pre></td></tr></table></figure></li>
<li>如果没有特指分布式事务，往往指的就是数据库事务</li>
</ul>
</li>
<li><p><strong>ACID 特性</strong></p>
<ul>
<li>原子性（Atomicity） ： 事务是最小的执行单位，不允许分割。事务的原子性确保动作要么全部完成，要么完全不起作用；</li>
<li>一致性（Consistency）：执行事务前后，数据保持一致，例如转账业务中，无论事务是否成功，转账者和收款人的总额应该是不变的；</li>
<li>隔离性（Isolation）： 并发访问数据库时，一个用户的事务不被其他事务所干扰，各并发事务之间数据库是独立的；</li>
<li>持久性（Durability）： 一个事务被提交之后。它对数据库中数据的改变是持久的，即使数据库发生故障也不应该对其有任何影响。</li>
</ul>
</li>
<li><p>数据事务的实现原理</p>
<ul>
<li>InnoDB 引擎<ul>
<li>使用redo log(重做日志)保证事务的持久性</li>
<li>使用undo log(回滚日志)来保证事务的原子性。</li>
</ul>
</li>
</ul>
</li>
<li><p><strong>并发事务带来哪些问题</strong></p>
<ul>
<li>脏读：事务A对数据进行修改，事务B读数据，此时事务A回滚，或者事务A在对数据进行修改，未提交给数据库前，事务B读数据，那么事务B读的数据就是“脏”的</li>
<li>丢失修改：事务A，事务B同时对数据进行修改，读取的数据是相同的，事务A修改后提交数据，事务B修改后也提交数据，此时事务B覆盖了事务A对数据进行的修改</li>
<li>不可重复读：事务A对数据进行多次读，此时事务B对数据进行修改，修改之后事务A读取的数据与之前读的不同</li>
<li>幻读：事务A对数据进行多次读，此时事务B进行增删数据，增删之后事务A发现多了一些原本不存在的记录</li>
<li>PS：不可重复读和幻读区别：不可重复读的重点是修改比如多次读取一条记录发现其中某些列的值被修改，幻读的重点在于新增或者删除比如多次查询同一条查询语句（DQL）时，记录发现记录增多或减少了</li>
</ul>
</li>
<li><p><strong>事务隔离级别</strong></p>
<ul>
<li>READ-UNCOMMITTED(读取未提交)：<ul>
<li>最低的隔离级别</li>
<li>事务可以读取已修改但未提交给数据库的数据</li>
<li>脏读、不可重复读、幻读都不能避免</li>
</ul>
</li>
<li>READ-COMMITTED(读取已提交)：<ul>
<li>事务只能读取已经提交给数据库的数据</li>
<li>可避免脏读</li>
<li>不能避免不可重复读、幻读</li>
</ul>
</li>
<li>REPEATABLE-READ(可重复读)：<ul>
<li>对同一字段的多次读取结果都是一致的，除非数据被事务本身修改</li>
<li>可避免脏读、不可重复读</li>
<li>不能避免幻读</li>
</ul>
</li>
<li>SERIALIZABLE(可串行化)：<ul>
<li>最高隔离级别</li>
<li>完全服从ACID的隔离级别</li>
<li>所有的事务依次逐个执行，这样事务之间就完全不可能产生干扰</li>
<li>可避免脏读、不可重复读、幻读</li>
</ul>
</li>
</ul>
</li>
<li><p><strong>MySQL 的默认隔离级别</strong></p>
<ul>
<li>MySQL InnoDB存储引擎的默认支持的隔离级别是 REPEATABLE-READ（可重读）。</li>
<li>MySQL InnoDB 的 REPEATABLE-READ（可重读）并不保证避免幻读，需要应用使用加锁读来保证。而这个加锁读使用到的机制就是 Next-Key Locks。</li>
<li>因为隔离级别越低，事务请求的锁越少，所以大部分数据库系统的隔离级别都是READ-COMMITTED(读取提交内容)，但是你要知道的是InnoDB存储引擎默认使用REPEATABLE-READ（可重读）并不会有任何性能损失。</li>
<li>InnoDB 存储引擎在 分布式事务 的情况下一般会用到 SERIALIZABLE(可串行化) 隔离级别。</li>
<li>InnoDB 存储引擎提供了对XA事务的支持，并通过XA事务来支持分布式事务的实现。分布式事务指的是允许多个独立的事务资源（transactional resources）参与到一个全局的事务中。事务资源通常是关系型数据库系统，但也可以是其他类型的资源。全局事务要求在其中的所有参与的事务要么都提交，要么都回滚，这对于事务原有的ACID要求又有了提高。另外，在使用分布式事务时，InnoDB 存储引擎的事务隔离级别必须设置为 SERIALIZABLE。</li>
</ul>
</li>
</ul>
<h2 id="MySQL索引详解"><a href="#MySQL索引详解" class="headerlink" title="MySQL索引详解"></a>MySQL索引详解</h2><ul>
<li><p>何为索引？有什么作用？</p>
<ul>
<li>索引是一种用于快速查询和检索数据的数据结构。常见的索引结构有: B 树，B+树和 Hash。</li>
<li>索引的作用就相当于目录的作用。</li>
</ul>
</li>
<li><p>索引的优缺点</p>
<ul>
<li>优点<ul>
<li>使用索引可以大大加快数据的检索速度（大大减少检索的数据量）, 这也是创建索引的最主要的原因。</li>
<li>通过创建唯一性索引，可以<strong>保证数据库表中每一行数据的唯一性</strong>。</li>
</ul>
</li>
<li>缺点<ul>
<li><strong>创建索引和维护索引需要耗费许多时间</strong>。当对表中的数据进行增删改的时候，如果数据有索引，那么索引也需要动态的修改，会降低 SQL 执行效率。</li>
<li>索引需要使用物理文件存储，也会<strong>耗费一定空间</strong>。</li>
</ul>
</li>
<li>但是，使用索引一定能提高查询性能吗?<ul>
<li>大多数情况下，索引查询都是比全表扫描要快的。但是如果数据库的数据量不大，那么使用索引也不一定能够带来很大提升。</li>
</ul>
</li>
</ul>
</li>
<li><p><strong>索引的底层数据结构</strong></p>
<ul>
<li>Hash表<ul>
<li>哈希表是键值对的集合，通过键(key)即可快速取出对应的值(value)，因此哈希表可以快速检索数据（接近 O（1））。</li>
<li>为何能够通过 key 快速取出 value呢？ 原因在于 哈希算法（也叫散列算法）。通过哈希算法，我们可以快速找到 key 对应的 index，找到了 index 也就找到了对应的 value。</li>
<li><img src="https://img-blog.csdnimg.cn/20210513092328171.png" alt="image"></li>
<li>Hash 冲突<ul>
<li>多个不同的 key 最后得到的 index 相同</li>
<li>常用的解决办法<ul>
<li>链地址法：链地址法就是将哈希冲突数据存放在链表中，也可以为了减少链表过长的时候搜索时间过长引入了红黑树。（最常用）<br>  <img src="https://img-blog.csdnimg.cn/20210513092224836.png" alt="image"></li>
<li>开放定址：一旦发生了冲突，就去寻找下一个空的散列地址</li>
<li>再hash法：有多个不同的Hash函数，当发生冲突时，使用第二个，第三个，….，等哈希函数</li>
<li>建立公共益处区：将哈希表分为基本表和溢出表两部分，凡是和基本表发生冲突的元素，一律填入溢出表</li>
</ul>
</li>
<li>Hash冲突的发生，一个好的哈希函数应该“均匀地”将数据分布在整个可能的哈希值集合中。</li>
</ul>
</li>
<li>既然哈希表这么快，为什么MySQL 没有使用其作为索引的数据结构呢？<ul>
<li>Hash 冲突问题 ：我们上面也提到过Hash 冲突了，不过对于数据库来说这还不算最大的缺点。</li>
<li>Hash 索引不支持顺序和范围查询(Hash索引不支持顺序和范围查询是它最大的缺点：假如我们要对表中的数据进行排序或者进行范围查询，那 Hash 索引可就不行了。</li>
</ul>
</li>
</ul>
</li>
<li>B 树&amp; B+树<ul>
<li>B 树也称 B-树,全称为 多路平衡查找树 ，B+ 树是 B 树的一种变体。B 树和 B+树中的 B 是 Balanced （平衡）的意思。目前大部分数据库系统及文件系统都采用 B-Tree 或其变种 B+Tree 作为索引结构。</li>
<li>B 树&amp; B+树两者有何异同呢？<ul>
<li>B树的所有节点既存放键(key) 也存放 数据(data)，而 B+树只有叶子节点存放 key 和 data，其他内节点只存放 key。</li>
<li>B树的叶子节点都是独立的;B+树的叶子节点有一条引用链指向与它相邻的叶子节点。</li>
<li>B 树的检索的过程相当于对范围内的每个节点的关键字做二分查找，可能还没有到达叶子节点，检索就结束了。而 B+树的检索效率就很稳定了，任何查找都是从根节点到叶子节点的过程，叶子节点的顺序检索很明显。</li>
<li>在MySQL中，MyISAM引擎和InnoDB引擎都是使用B+Tree作为索引结构，但是，两者的实现方式不太一样。（下面的内容整理自《Java 工程师修炼之道》）<ul>
<li>MyISAM 引擎中，B+Tree <strong>叶节点的data域存放的是数据记录的地址</strong>。在索引检索的时候，首先按照 B+Tree 搜索算法搜索索引，如果指定的Key存在，则取出其data域的值，然后以data域的值为地址读取相应的数据记录。这被称为“非聚簇索引”。</li>
<li>InnoDB 引擎中，其数据文件本身就是索引文件。相比MyISAM，索引文件和数据文件是分离的，<strong>其表数据文件本身就是按 B+Tree 组织的一个索引结构</strong>，树的叶节点 data 域保存了完整的数据记录。这个索引的 key 是数据表的主键，因此InnoDB表数据文件本身就是主索引。这被称为“聚簇索引（或聚集索引）”，而其余的索引都作为辅助索引，<strong>辅助索引的data域存储相应记录主键的值而不是地址</strong>，这也是和MyISAM不同的地方<strong>。在根据主索引搜索时，直接找到key所在的节点即可取出数据；在根据辅助索引查找时，则需要先取出主键的值，再走一遍主索引。</strong>因此，在设计表的时候，不建议使用过长的字段作为主键，也不建议使用非单调的字段作为主键，这样会造成主索引频繁分裂。</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><p><strong>索引类型</strong></p>
<ul>
<li>主键索引(Primary Key)<ul>
<li>数据表的主键列使用的就是主键索引。</li>
<li>一张数据表有只能有一个主键，并且主键不能为 null，不能重复。</li>
<li>在MySQL的InnoDB的表中，当没有显示的指定表的主键时，InnoDB会自动先检查表中是否有唯一索引且不允许存在null值的字段，如果有，则选择该字段为默认的主键，否则 InnoDB 将会自动创建一个 6Byte 的自增主键。</li>
</ul>
</li>
<li>辅助索引<ul>
<li>二级索引又称为辅助索引，是因为二级索引的叶子节点存储的数据是主键。也就是说，通过二级索引，可以定位主键的位置。</li>
<li>唯一索引，普通索引，前缀索引等索引属于二级索引。<ul>
<li>唯一索引(Unique Key)：唯一索引也是一种约束。唯一索引的属性列不能出现重复的数据，但是<strong>允许数据为 NULL</strong>，一张表允许创建多个唯一索引。建立唯一索引的目的大部分时候都是为了该属性列的数据的唯一性，而不是为了查询效率。</li>
<li>普通索引(Index)：普通索引的唯一作用就是为了快速查询数据，一张表允许创建多个普通索引，并允许数据重复和 NULL。</li>
<li>前缀索引(Prefix)：前缀索引只适用于字符串类型的数据。前缀索引是对文本的前几个字符创建索引，相比普通索引建立的数据更小， 因为只取前几个字符。</li>
<li>全文索引(FullText)：全文索引主要是为了检索大文本数据中的关键字的信息，是目前搜索引擎数据库使用的一种技术。Mysql5.6 之前只有 MYISAM 引擎支持全文索引，5.6 之后InnoDB也支持了全文索引。</li>
</ul>
</li>
</ul>
</li>
<li>聚集索引与非聚集索引<ul>
<li><p>聚集索引</p>
<ul>
<li>即索引结构和数据一起存放的索引。主键索引属于聚集索引。</li>
<li>在 MySQL 中，InnoDB引擎的表的.ibd文件就包含了该表的索引和数据，对于InnoDB引擎表来说，该表的索引(B+树)的每个非叶子节点存储索引，叶子节点存储索引和索引对应的数据。</li>
<li>优点<ul>
<li><strong>聚集索引的查询速度非常的快</strong>，因为整个B+树本身就是一颗多叉平衡树，叶子节点也都是有序的，定位到索引的节点，就相当于定位到了数据。</li>
</ul>
</li>
<li>缺点<ul>
<li>依赖于有序的数据：因为B+树是多路平衡树，如果索引的数据不是有序的，那么就需要在插入时排序，如果数据是整型还好，否则类似于字符串或 UUID 这种又长又难比较的数据，插入或查找的速度肯定比较慢。</li>
<li><strong>更新代价大</strong>：如果对索引列的数据被修改时，那么对应的索引也将会被修改，而且聚集索引的叶子节点还存放着数据，修改代价肯定是较大的，所以对于主键索引来说，主键一般都是不可被修改的。</li>
</ul>
</li>
</ul>
</li>
<li><p>非聚集索引</p>
<ul>
<li>非聚集索引即索引结构和数据分开存放的索引。</li>
<li>二级索引属于非聚集索引。</li>
<li>非聚集索引的叶子节点并不一定存放数据的指针，因为二级索引的叶子节点就存放的是主键，根据主键再回表查数据。</li>
<li>优点<ul>
<li>更新代价比聚集索引要小。非聚集索引的更新代价就没有聚集索引那么大了，非聚集索引的叶子节点是不存放数据的</li>
</ul>
</li>
<li>缺点<ul>
<li>跟聚集索引一样，非聚集索引也依赖于有序的数据</li>
<li>可能会二次查询(回表):这应该是非聚集索引最大的缺点了。当查到索引对应的指针或主键后，可能还需要根据指针或主键再到数据文件或表中查询。</li>
</ul>
</li>
</ul>
</li>
<li><p><img src="https://img-blog.csdnimg.cn/20210420165326946.png" alt="image"></p>
</li>
<li><p>MySQL的表的文件截图:</p>
</li>
<li><p><img src="https://img-blog.csdnimg.cn/20210420165311654.png" alt="image"></p>
</li>
<li><p>非聚集索引一定回表查询吗(覆盖索引)?</p>
<ul>
<li>非聚集索引不一定回表查询。<ul>
<li>试想一种情况，用户准备使用 SQL 查询用户名，而用户名字段正好建立了索引。那么这个索引的 key 本身就是 name，查到对应的 name 直接返回就行了，无需回表查询。</li>
<li>即使是 MYISAM 也是这样，虽然MYISAM的主键索引确实需要回表，因为它的主键索引的叶子节点存放的是指针。但是如果 SQL 查的就是主键呢?<ul>
<li>主键索引本身的 key 就是主键，查到返回就行了。这种情况就称之为覆盖索引了。</li>
</ul>
</li>
</ul>
</li>
<li>覆盖索引<ul>
<li>如果一个索引包含（或者说覆盖）所有需要查询的字段的值，我们就称之为“覆盖索引”。</li>
<li>覆盖索引即需要查询的字段正好是索引的字段，那么直接根据该索引，就可以查到数据了， 而无需回表查询。</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>联合索引<ul>
<li>使用表中的多个字段创建索引，就是联合索引，也叫组合索引或复合索引。</li>
<li>最左前缀匹配原则<ul>
<li>最左前缀匹配原则指的是，在使用联合索引时，MySQL会根据联合索引中的字段顺序。从左到右依次到查询条件中去匹配，如果查询条件中存在与联合索引中最左侧字段相匹配的字段，则就会使用该字段过滤一批数据，直至联合索引中全部字段匹配完成，或者在执行过程中遇到范围查询，如 &gt;、&lt;、between 和 以%开头的like查询 等条件，才会停止匹配。</li>
<li>所以，我们在使用联合索引时，可以将<strong>区分度高的字段放在最左边，这也可以过滤更多数据</strong>。</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><p>索引下推</p>
</li>
<li><p>在非聚簇索引遍历过程中，对索引中包含的字段先做判断，过滤掉不符合条件的记录，减少回表次数。</p>
</li>
<li><p>创建索引的注意事项</p>
<ul>
<li>选择合适的字段创建索引：<ul>
<li><strong>不为 NULL 的字段</strong>：索引字段的数据应该尽量不为NULL，因为对于数据为NULL的字段，数据库较难优化。如果字段频繁被查询，但又避免不了为 NULL，建议使用 0,1,true,false 这样语义较为清晰的短值或短字符作为替代。</li>
<li><strong>被频繁查询的字段</strong> ：我们创建索引的字段应该是查询操作非常频繁的字段。</li>
<li><strong>被作为条件查询的字段</strong> ：被作为 WHERE 条件查询的字段，应该被考虑建立索引。</li>
<li><strong>频繁需要排序的字段</strong> ：索引已经排序，这样查询可以利用索引的排序，加快排序查询时间。</li>
<li><strong>被经常频繁用于连接的字段</strong>：经常用于连接的字段可能是一些外键列，对于外键列并不一定要建立外键，只是说该列涉及到表与表的关系。对于频繁被连接查询的字段，可以考虑建立索引，提高多表连接查询的效率。</li>
</ul>
</li>
<li>被频繁更新的字段应该慎重建立索引。<ul>
<li>虽然索引能带来查询上的效率，但是维护索引的成本也是不小的。如果一个字段不被经常查询，反而被经常修改，那么就更不应该在这种字段上建立索引了。</li>
</ul>
</li>
<li>尽可能的考虑建立联合索引而不是单列索引。<ul>
<li>因为索引是需要占用磁盘空间的，可以简单理解为<strong>每个索引都对应着一颗B+树</strong>。如果一个表的字段过多，索引过多，那么当这个表的数据达到一个体量后，索引占用的空间也是很多的，且修改索引时，耗费的时间也是较多的。如果是联合索引，多个字段在一个索引上，那么将会节约很大磁盘空间，且修改数据的操作效率也会提升。</li>
</ul>
</li>
<li>注意避免冗余索引。<ul>
<li>冗余索引指的是索引的功能相同，能够命中索引(a,b)就肯定能命中索引(a)，那么索引(a)就是冗余索引。如（name,city ）和（name ）这两个索引就是冗余索引，能够命中前者的查询肯定是能够命中后者的在大多数情况下，都应该尽量扩展已有的索引而不是创建新索引。</li>
</ul>
</li>
<li>考虑在字符串类型的字段上使用前缀索引代替普通索引<ul>
<li>前缀索引仅限于字符串类型，较普通索引会占用更小的空间，所以可以考虑使用前缀索引带替普通索引。</li>
</ul>
</li>
<li>使用索引的一些建议<ul>
<li>对于中到大型表索引都是非常有效的，但是特大型表的话维护开销会很大，不适合建索引</li>
<li>避免where子句中对字段施加函数，这会造成无法命中索引。</li>
<li>在使用 InnoDB 时使用与业务无关的自增主键作为主键，即使用逻辑主键，而不要使用业务主键。</li>
<li>删除长期未使用的索引，不用的索引的存在会造成不必要的性能损耗 MySQL 5.7 可以通过查询 sys 库的 schema_unused_indexes 视图来查询哪些索引从未被使用</li>
<li>在使用 limit offset 查询缓慢时，可以借助索引来提高性能</li>
</ul>
</li>
</ul>
<p>  ​</p>
</li>
</ul>

      
    </div>
    <div class="article-footer">
      <blockquote class="mt-2x">
  <ul class="post-copyright list-unstyled">
    
    <li class="post-copyright-link hidden-xs">
      <strong>本文链接：</strong>
      <a href="http://example.com/2022/05/17/MySQL/" title="MySQL" target="_blank" rel="external">http://example.com/2022/05/17/MySQL/</a>
    </li>
    
    <li class="post-copyright-license">
      <strong>版权声明： </strong> 本博客所有文章除特别声明外，均采用 <a href="http://creativecommons.org/licenses/by/4.0/deed.zh" target="_blank" rel="external">CC BY 4.0 CN协议</a> 许可协议。转载请注明出处！
    </li>
  </ul>
</blockquote>


<div class="panel panel-default panel-badger">
  <div class="panel-body">
    <figure class="media">
      <div class="media-left">
        <a href="https://github.com/Miracle-Pig" target="_blank" class="img-burn thumb-sm visible-lg">
          <img src="/images/avatar.jpg" class="img-rounded w-full" alt="">
        </a>
      </div>
      <div class="media-body">
        <h3 class="media-heading"><a href="https://github.com/Miracle-Pig" target="_blank"><span class="text-dark">Miracle-Pig</span><small class="ml-1x">Web Developer &amp; Designer</small></a></h3>
        <div>个人简介。</div>
      </div>
    </figure>
  </div>
</div>


    </div>
  </article>
  
    
  <section id="comments">
  	
      <div id="vcomments"></div>
    
  </section>


  
</div>

  <nav class="bar bar-footer clearfix" data-stick-bottom>
  <div class="bar-inner">
  
  <ul class="pager pull-left">
    
    <li class="prev">
      <a href="/2022/05/17/Essential%20Skills/" title="Essential Skills"><i class="icon icon-angle-left" aria-hidden="true"></i><span>&nbsp;&nbsp;Newer</span></a>
    </li>
    
    
    <li class="next">
      <a href="/2022/05/17/Computer%20Networks/" title="Computer Networks"><span>Older&nbsp;&nbsp;</span><i class="icon icon-angle-right" aria-hidden="true"></i></a>
    </li>
    
    
    <li class="toggle-toc">
      <a class="toggle-btn " data-toggle="collapse" href="#collapseToc" aria-expanded="false" title="Catalogue" role="button">    <span>[&nbsp;</span><span>Catalogue</span>
        <i class="text-collapsed icon icon-anchor"></i>
        <i class="text-in icon icon-close"></i>
        <span>]</span>
      </a>
    </li>
    
  </ul>
  
  
  <!-- Button trigger modal -->
  <button type="button" class="btn btn-fancy btn-donate pop-onhover bg-gradient-warning" data-toggle="modal" data-target="#donateModal"><span>$</span></button>
  <!-- <div class="wave-icon wave-icon-danger btn-donate" data-toggle="modal" data-target="#donateModal">
    <div class="wave-circle"><span class="icon"><i class="icon icon-bill"></i></span></div>
  </div> -->
  
  
  <div class="bar-right">
    
  </div>
  </div>
</nav>
  
<!-- Modal -->
<div class="modal modal-center modal-small modal-xs-full fade" id="donateModal" tabindex="-1" role="dialog">
  <div class="modal-dialog" role="document">
    <div class="modal-content donate">
      <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
      <div class="modal-body">
        <div class="donate-box">
          <div class="donate-head">
            <p>Maybe you could buy me a cup of coffee.</p>
          </div>
          <div class="tab-content">
            <div role="tabpanel" class="tab-pane fade active in" id="alipay">
              <div class="donate-payimg">
                <img src="/images/donate/alipayimg.png" alt="Scan Qrcode" title="Scan" />
              </div>
              <p class="text-muted mv">Scan this qrcode</p>
              <p class="text-grey">Open alipay app scan this qrcode, buy me a coffee!</p>
            </div>
            <div role="tabpanel" class="tab-pane fade" id="wechatpay">
              <div class="donate-payimg">
                <img src="/images/donate/wechatpayimg.png" alt="Scan Qrcode" title="Scan" />
              </div>
              <p class="text-muted mv">Scan this qrcode</p>
              <p class="text-grey">Open wechat app scan this qrcode, buy me a coffee!</p>
            </div>
          </div>
          <div class="donate-footer">
            <ul class="nav nav-tabs nav-justified" role="tablist">
              <li role="presentation" class="active">
                <a href="#alipay" id="alipay-tab" role="tab" data-toggle="tab" aria-controls="alipay" aria-expanded="true"><i class="icon icon-alipay"></i> alipay</a>
              </li>
              <li role="presentation" class="">
                <a href="#wechatpay" role="tab" id="wechatpay-tab" data-toggle="tab" aria-controls="wechatpay" aria-expanded="false"><i class="icon icon-wepay"></i> wechat payment</a>
              </li>
            </ul>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>



</main>

  <footer class="footer" itemscope itemtype="http://schema.org/WPFooter">
	
	
    <ul class="social-links">
    	
        <li><a href="https://github.com/Miracle-Pig" target="_blank" title="Github" data-toggle=tooltip data-placement=top><i class="icon icon-github"></i></a></li>
        
        <li><a href="/atom.xml" target="_blank" title="Rss" data-toggle=tooltip data-placement=top><i class="icon icon-rss"></i></a></li>
        
    </ul>

    <div class="copyright">
    	
        <div class="publishby">
        	Theme by <a href="https://github.com/cofess" target="_blank"> cofess </a>base on <a href="https://github.com/cofess/hexo-theme-pure" target="_blank">pure</a>.
        </div>
    </div>
</footer>
  <script src="//cdn.jsdelivr.net/npm/jquery@1.12.4/dist/jquery.min.js"></script>
<script>
window.jQuery || document.write('<script src="js/jquery.min.js"><\/script>')
</script>

<script src="/js/plugin.min.js"></script>


<script src="/js/application.js"></script>


    <script>
(function (window) {
    var INSIGHT_CONFIG = {
        TRANSLATION: {
            POSTS: 'Posts',
            PAGES: 'Pages',
            CATEGORIES: 'Categories',
            TAGS: 'Tags',
            UNTITLED: '(Untitled)',
        },
        ROOT_URL: '/',
        CONTENT_URL: '/content.json',
    };
    window.INSIGHT_CONFIG = INSIGHT_CONFIG;
})(window);
</script>

<script src="/js/insight.js"></script>






   




   
    
  <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/valine"></script>
  <script type="text/javascript">
  var GUEST = ['nick', 'mail', 'link'];
  var meta = 'nick,mail,link';
  meta = meta.split(',').filter(function(item) {
    return GUEST.indexOf(item) > -1;
  });
  new Valine({
    el: '#vcomments',
    verify: false,
    notify: false,
    appId: '',
    appKey: '',
    placeholder: 'Just go go',
    avatar: 'mm',
    meta: meta,
    pageSize: '10' || 10,
    visitor: false
  });
  </script>

     







</body>
</html>